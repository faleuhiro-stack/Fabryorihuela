<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pedir canci√≥n ‚Äì Fabry Orihuela</title>
  <style>
    :root{--bg:#0b0b0f;--card:#12121a;--text:#f3f3f6;--muted:#b7b7c2;--accent:#e10600;--border:rgba(255,255,255,.08);}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);}
    header{padding:18px 16px 10px;position:sticky;top:0;background:linear-gradient(180deg,var(--bg) 0%, rgba(11,11,15,.90) 75%, rgba(11,11,15,0) 100%);backdrop-filter:blur(6px);}
    h1{margin:0 0 10px;font-size:20px;letter-spacing:.3px;color:var(--accent);}
    .row{display:flex;gap:10px;flex-wrap:wrap;}
    .btn{display:inline-block;text-decoration:none;color:var(--text);background:var(--card);border:1px solid var(--border);padding:10px 12px;border-radius:12px;font-weight:700}
    .btn.accent{background:var(--accent);border-color:rgba(0,0,0,.15);}
    .search{width:100%;box-sizing:border-box;margin-top:12px;padding:12px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--text);font-size:16px;outline:none;}
    main{padding:10px 16px 26px;}
    .meta{color:var(--muted);font-size:13px;margin-top:8px;}
    .item{margin-top:12px;padding:12px;border-radius:14px;background:var(--card);border:1px solid var(--border);display:flex;justify-content:space-between;gap:12px;align-items:center;}
    .song{font-weight:800;}
    .artist{color:var(--muted);font-size:13px;margin-top:4px;}
    .pick{background:var(--accent);border:0;color:#fff;padding:10px 12px;border-radius:12px;font-weight:900;}
    .modalBack{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:flex-end;}
    .modal{width:100%;background:var(--card);border-top:1px solid var(--border);border-radius:18px 18px 0 0;padding:16px;}
    .modal h2{margin:0 0 6px;font-size:16px;}
    .modal .small{color:var(--muted);font-size:13px;margin:0 0 12px;}
    .input{width:100%;box-sizing:border-box;padding:12px;border-radius:12px;border:1px solid var(--border);background:#0f0f16;color:var(--text);font-size:16px;outline:none;}
    .actions{display:flex;gap:10px;margin-top:12px;}
    .actions button{flex:1;}
  </style>
</head>
<body>

<header>
  <h1>Pedir canci√≥n</h1>
  <div class="row">
    <a class="btn" href="index.html">‚¨ÖÔ∏è Home</a>
    <a class="btn" href="propina.html">üíµ Propina</a>
  </div>

  <input id="q" class="search" placeholder="Buscar por artista o canci√≥n‚Ä¶" autocomplete="off" />
  <div id="count" class="meta">Cargando repertorio‚Ä¶</div>
</header>

<main id="list"></main>

<!-- Modal -->
<div id="back" class="modalBack">
  <div class="modal">
    <h2 id="pickedTitle">Canci√≥n:</h2>
    <p class="small" id="pickedArtist"></p>

    <label class="small">Tu nombre (opcional)</label>
    <input id="name" class="input" placeholder="Ej: Ana" />

    <div class="actions">
      <button class="btn" id="cancel">Cancelar</button>
      <button class="btn accent" id="send">Enviar por WhatsApp</button>
    </div>
    <p class="small" style="margin-top:10px;">Despu√©s de enviar te aparecer√° la opci√≥n de propina ü§ó</p>
  </div>
</div>

<script>
  // ‚úÖ Lista final (sin repetidas) y ordenada por artista + canci√≥n
  const SONGS = [
    {"artist":"Alejandro Sanz","title":"Amiga m√≠a"},
    {"artist":"Alejandro Sanz","title":"Coraz√≥n part√≠o"},
    {"artist":"Alex Ubago","title":"Sin miedo a nada"},
    {"artist":"Ana Bel√©n","title":"Simplemente amigos"},
    {"artist":"Andr√©s Calamaro","title":"Flaca"},
    {"artist":"Andr√©s Calamaro","title":"Sin documentos"},
    {"artist":"Andr√©s Cepeda","title":"D√≠a tras d√≠a"},
    {"artist":"Andr√©s Cepeda","title":"Te voy a amar"},
    {"artist":"Aterciopelados","title":"Bolero falaz"},
    {"artist":"Bacilos","title":"Caraluna"},
    {"artist":"Bacilos","title":"Pasos de gigante"},
    {"artist":"Bacilos","title":"Tabaco y Chanel"},
    {"artist":"Carlos Baute","title":"Colgando en tus manos"},
    {"artist":"Carlos Rivera","title":"Te ped√≠"},
    {"artist":"Carlos Vives","title":"D√©jame robarte un beso"},
    {"artist":"Carlos Vives","title":"La gota fr√≠a"},
    {"artist":"Carlos Vives","title":"La tierra del olvido"},
    {"artist":"Carlos Vives","title":"Un poquito"},
    {"artist":"Camila","title":"Al√©jate de m√≠"},
    {"artist":"Camila","title":"Mientes"},
    {"artist":"Camila","title":"Todo cambi√≥"},
    {"artist":"Camilo","title":"Tutu"},
    {"artist":"Selena","title":"Como la flor"},
    {"artist":"Chayanne","title":"Bailando bachata"},
    {"artist":"Chayanne","title":"Lo dejar√≠a todo"},
    {"artist":"Chayanne","title":"Y t√∫ te vas"},
    {"artist":"Compay Segundo","title":"L√°grimas negras"},
    {"artist":"Cristian Castro","title":"Amor"},
    {"artist":"Cristian Castro","title":"Lloran las rosas"},
    {"artist":"Cristian Castro","title":"Nunca voy a olvidarte"},
    {"artist":"Diego Torres","title":"Color esperanza"},
    {"artist":"Diego Torres","title":"Sue√±os"},
    {"artist":"Donato & Est√©fano","title":"Estoy enamorado"},
    {"artist":"D√∫o Din√°mico","title":"Resistir√©"},
    {"artist":"Elefante","title":"As√≠ es la vida"},
    {"artist":"Elefante","title":"Contigo"},
    {"artist":"Elefante","title":"√Ångel"},
    {"artist":"Enanitos Verdes","title":"Amores lejanos"},
    {"artist":"Enanitos Verdes","title":"Lamento boliviano"},
    {"artist":"Enanitos Verdes","title":"Luz de d√≠a"},
    {"artist":"Enanitos Verdes","title":"Mariposas"},
    {"artist":"Enanitos Verdes","title":"Yo te vi en un tren"},
    {"artist":"Enrique Iglesias","title":"Bailando"},
    {"artist":"Fonseca","title":"Arroyito"},
    {"artist":"Fonseca","title":"Qu√© suerte"},
    {"artist":"Fonseca","title":"Simples corazones"},
    {"artist":"Fonseca","title":"Solo contigo"},
    {"artist":"Fonseca","title":"T√∫ eres mi sue√±o"},
    {"artist":"Franco De Vita","title":"Si t√∫ no est√°s"},
    {"artist":"Franco De Vita","title":"Te amo"},
    {"artist":"Franco De Vita","title":"Te veo venir soledad"},
    {"artist":"Franco De Vita","title":"T√∫ de qu√© vas"},
    {"artist":"Galy Galiano","title":"La cita"},
    {"artist":"Gian Marco","title":"Fotograf√≠a"},
    {"artist":"Gian Marco","title":"Hoy"},
    {"artist":"Gian Marco","title":"Lejos de ti"},
    {"artist":"Gianluca Grignani","title":"Mi historia entre tus dedos"},
    {"artist":"Gilberto Santa Rosa","title":"Conciencia"},
    {"artist":"Gilberto Santa Rosa","title":"Mentira"},
    {"artist":"Gilberto Santa Rosa","title":"Que alguien me diga"},
    {"artist":"Grupo Frontera","title":"No se va"},
    {"artist":"Jarabe de Palo","title":"Agua"},
    {"artist":"Jarabe de Palo","title":"Depende"},
    {"artist":"Jarabe de Palo","title":"Grita"},
    {"artist":"Jarabe de Palo","title":"La flaca"},
    {"artist":"Jaime Roos","title":"Am√°ndote"},
    {"artist":"Jaime Roos","title":"Colombina"},
    {"artist":"Jesse & Joy","title":"¬°Corre!"},
    {"artist":"Joaqu√≠n Sabina","title":"19 d√≠as y 500 noches"},
    {"artist":"Joaqu√≠n Sabina","title":"Amor se llama el juego"},
    {"artist":"Joaqu√≠n Sabina","title":"Peces de ciudad"},
    {"artist":"Joaqu√≠n Sabina","title":"Por el bulevar de los sue√±os rotos"},
    {"artist":"Joaqu√≠n Sabina","title":"Princesa"},
    {"artist":"Joaqu√≠n Sabina","title":"Qui√©n me ha robado el mes de abril"},
    {"artist":"Joaqu√≠n Sabina","title":"Y sin embargo"},
    {"artist":"Jorge Drexler","title":"Horas"},
    {"artist":"Juan Gabriel","title":"As√≠ fue"},
    {"artist":"Juan Gabriel","title":"Hasta que te conoc√≠"},
    {"artist":"Juan Luis Guerra","title":"Bachata rosa"},
    {"artist":"Juan Luis Guerra","title":"Burbujas de amor"},
    {"artist":"Juan Luis Guerra","title":"Cuando me enamoro"},
    {"artist":"Juan Luis Guerra","title":"Estrellitas y duendes"},
    {"artist":"Juan Luis Guerra","title":"Fr√≠o fr√≠o"},
    {"artist":"Juan Luis Guerra","title":"Hormiguitas"},
    {"artist":"Juan Luis Guerra","title":"Ojal√° que llueva caf√©"},
    {"artist":"Juanes","title":"A Dios le pido"},
    {"artist":"Juanes","title":"Es por ti"},
    {"artist":"Juanes","title":"Fotograf√≠a"},
    {"artist":"Juanes","title":"La camisa negra"},
    {"artist":"Juanes","title":"Mala gente"},
    {"artist":"Juanes","title":"Me enamora"},
    {"artist":"Juanes","title":"Para tu amor"},
    {"artist":"Juanes","title":"Volverte a ver"},
    {"artist":"Julio Iglesias","title":"Derroche"},
    {"artist":"Karin Le√≥n","title":"La primera cita"},
    {"artist":"La Vela Puerca","title":"Para no verme m√°s"},
    {"artist":"La Vela Puerca","title":"Zafar"},
    {"artist":"Los Fabulosos Cadillacs","title":"Matador"},
    {"artist":"Los Fabulosos Cadillacs","title":"Vasos vac√≠os"},
    {"artist":"Los Pericos","title":"Pupilas lejanas"},
    {"artist":"Los Prisioneros","title":"Tren al sur"},
    {"artist":"Lucas Sugo","title":"5 minutos"},
    {"artist":"Lucas Sugo","title":"Hechicera"},
    {"artist":"Luis Enrique","title":"Yo no s√© ma√±ana"},
    {"artist":"Luis Miguel","title":"Historia de un amor"},
    {"artist":"Maluma","title":"Felices los 4"},
    {"artist":"Maluma","title":"Sobrio"},
    {"artist":"Man√°","title":"Bendita tu luz"},
    {"artist":"Man√°","title":"Cachito"},
    {"artist":"Man√°","title":"En el muelle de San Blas"},
    {"artist":"Man√°","title":"Eres mi religi√≥n"},
    {"artist":"Man√°","title":"Hundido en un rinc√≥n"},
    {"artist":"Man√°","title":"Labios compartidos"},
    {"artist":"Man√°","title":"Manda una se√±al"},
    {"artist":"Man√°","title":"Mariposa traicionera"},
    {"artist":"Man√°","title":"No ha parado de llover"},
    {"artist":"Man√°","title":"Ojal√° pudiera borrarte"},
    {"artist":"Man√°","title":"Oye mi amor"},
    {"artist":"Man√°","title":"Se me olvid√≥ otra vez"},
    {"artist":"Man√°","title":"Te llor√© todo un r√≠o"},
    {"artist":"Man√°","title":"Vivir sin aire"},
    {"artist":"Manuel Garc√≠a","title":"P√°jaros de barro"},
    {"artist":"Marco Antonio Sol√≠s","title":"D√≥nde estar√° mi primavera"},
    {"artist":"Marco Antonio Sol√≠s","title":"M√°s que tu amigo"},
    {"artist":"Marco Antonio Sol√≠s","title":"Si no te hubieras ido"},
    {"artist":"Marco Antonio Sol√≠s","title":"Tu c√°rcel"},
    {"artist":"Marc Anthony","title":"Contra la corriente"},
    {"artist":"Marc Anthony","title":"Flor p√°lida"},
    {"artist":"Marc Anthony","title":"Hasta ayer"},
    {"artist":"Marc Anthony","title":"Te conozco bien"},
    {"artist":"Marc Anthony","title":"Tu amor me hace bien"},
    {"artist":"Marc Anthony","title":"Yo que te conozco bien"},
    {"artist":"Melendi","title":"Un violinista en tu tejado"},
    {"artist":"Miguel Mateos","title":"Tira para arriba"},
    {"artist":"No Te Va Gustar","title":"A las 9"},
    {"artist":"No Te Va Gustar","title":"Chau"},
    {"artist":"No Te Va Gustar","title":"Clara"},
    {"artist":"No Te Va Gustar","title":"No necesito nada"},
    {"artist":"No Te Va Gustar","title":"Verte re√≠r"},
    {"artist":"Omar Alfanno","title":"Amores como el nuestro"},
    {"artist":"Pablo Albor√°n","title":"Perd√≥name"},
    {"artist":"Pablo Albor√°n","title":"Por fin"},
    {"artist":"Pablo Albor√°n","title":"Qui√©n"},
    {"artist":"Pablo Albor√°n","title":"Saturno"},
    {"artist":"Pablo Albor√°n","title":"Solamente t√∫"},
    {"artist":"Pablo Albor√°n","title":"Te he echado de menos"},
    {"artist":"Pedro Cap√≥","title":"Calma"},
    {"artist":"Pedro Cap√≥","title":"La fiesta"},
    {"artist":"Pedro Cap√≥","title":"Vivo"},
    {"artist":"Pedro Fern√°ndez","title":"Mi forma de sentir"},
    {"artist":"Polo Monta√±ez","title":"Flor p√°lida"},
    {"artist":"Polo Monta√±ez","title":"Un mont√≥n de estrellas"},
    {"artist":"Reik","title":"Creo en ti"},
    {"artist":"Reik","title":"Ya me enter√©"},
    {"artist":"Ricardo Arjona","title":"Asignatura pendiente"},
    {"artist":"Ricardo Arjona","title":"El taxista"},
    {"artist":"Ricardo Arjona","title":"Lo poco que tengo"},
    {"artist":"Ricardo Arjona","title":"Ping√ºinos en la cama"},
    {"artist":"Ricardo Arjona","title":"Quiero"},
    {"artist":"Ricardo Arjona","title":"Se nos muere el amor"},
    {"artist":"Ricardo Montaner","title":"Ser√°"},
    {"artist":"Santiago Cruz","title":"Baja la guardia"},
    {"artist":"Santiago Cruz","title":"Desde lejos"},
    {"artist":"Santiago Cruz","title":"No te necesito"},
    {"artist":"Santiago Cruz","title":"Y si te quedas qu√©"},
    {"artist":"Shakira","title":"Moscas en la casa"},
    {"artist":"Silvestre Dangond","title":"C√°sate conmigo"},
    {"artist":"Silvio Rodr√≠guez","title":"Ojal√°"},
    {"artist":"Silvio Rodr√≠guez","title":"Qui√©n fuera"},
    {"artist":"Son By Four","title":"A puro dolor"},
    {"artist":"Vicente Garc√≠a","title":"Dulcito coco"},
    {"artist":"Vicente Garc√≠a","title":"Espuma y arrecife"},
    {"artist":"Vilma Palma e Vampiros","title":"Bye Bye"},
    {"artist":"Vilma Palma e Vampiros","title":"Mojada"}
  ];

  const WHATSAPP_NUMBER = "14845442917"; // tu n√∫mero

  const listEl = document.getElementById('list');
  const countEl = document.getElementById('count');
  const qEl = document.getElementById('q');

  const back = document.getElementById('back');
  const pickedTitle = document.getElementById('pickedTitle');
  const pickedArtist = document.getElementById('pickedArtist');
  const nameEl = document.getElementById('name');
  const cancelBtn = document.getElementById('cancel');
  const sendBtn = document.getElementById('send');

  let selected = null;

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }

  function render(filter=""){
    const f = filter.trim().toLowerCase();
    const rows = SONGS.filter(s => (s.title + " " + s.artist).toLowerCase().includes(f));

    listEl.innerHTML = "";
    countEl.textContent = `Mostrando ${rows.length} canciones`;

    rows.forEach(s => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <div>
          <div class="song">${escapeHtml(s.title)}</div>
          <div class="artist">${escapeHtml(s.artist)}</div>
        </div>
        <button class="pick">Pedir</button>
      `;
      div.querySelector(".pick").addEventListener("click", () => openModal(s));
      listEl.appendChild(div);
    });
  }

  function openModal(song){
    selected = song;
    pickedTitle.textContent = "Canci√≥n: " + song.title;
    pickedArtist.textContent = "Artista: " + song.artist;
    nameEl.value = "";
    back.style.display = "flex";
    setTimeout(()=>nameEl.focus(), 50);
  }

  function closeModal(){
    back.style.display = "none";
    selected = null;
  }

  cancelBtn.addEventListener("click", closeModal);
  back.addEventListener("click", (e)=>{ if(e.target === back) closeModal(); });

  sendBtn.addEventListener("click", () => {
    if(!selected) return;

    const nombre = nameEl.value.trim();
    const lineaNombre = nombre ? `Nombre: ${nombre}\n` : "";
    const msg = `üé∂ Pedido de canci√≥n\n${lineaNombre}Canci√≥n: ${selected.title}\nArtista: ${selected.artist}\n\nGracias!`;

    // 1) Abre WhatsApp con mensaje listo
    const wa = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
    window.location.href = wa;

    // 2) Luego manda a propina (cuando vuelva al navegador)
    setTimeout(() => { window.location.href = "propina.html"; }, 1200);
  });

  qEl.addEventListener("input", () => render(qEl.value));
  render();
</script>
</body>
</html>